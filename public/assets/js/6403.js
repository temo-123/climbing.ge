"use strict";(self.webpackChunkclimbing_loc=self.webpackChunkclimbing_loc||[]).push([[6403,1006],{1006:(t,e,s)=>{s.r(e),s.d(e,{default:()=>r});var a=s(6247),o=s(2586);const i={components:{StackModal:s.n(o)(),SlickItem:a.SlickItem,SlickList:a.SlickList},props:[],data:function(){return{sectors:[],filtred_sectors:[],outdoor_areas:[],sectors_loading:!1,add_sector_modal:!1,selected_sector:"Select sector",selected_outdoor_area:"Select outdoor area",image_sectors:[],data:{title:"",image:""}}},mounted:function(){this.get_all_outdoor_areas(),this.get_all_sectors()},methods:{get_all_outdoor_areas:function(){var t=this;this.sectors_loading=!0,axios.post("../../api/article/",{category:"outdoor"}).then((function(e){t.outdoor_areas=e.data})).catch((function(t){return console.log(t)})).finally((function(){return t.sectors_loading=!1}))},get_all_sectors:function(){var t=this;axios.get("../../api/sector/").then((function(e){t.sectors=e.data})).catch((function(t){return console.log(t)}))},get_region_sectors:function(){if("Select outdoor area"!=this.selected_outdoor_area&&"All sectors"!=this.selected_outdoor_area){var t=this;this.filtred_sectors=this.sectors.filter((function(e){return e.article_id==t.selected_outdoor_area}))}else"Select outdoor area"!=this.selected_outdoor_area&&this.selected_outdoor_area,this.filtred_sectors=this.sectors},close_add_sector_modal:function(){this.selected_sector="Select sector",this.add_sector_modal=!1},add_new_sector_model:function(){this.add_sector_modal=!0},add_sector_from_modal:function(t){this.$emit("sector",this.selected_sector),this.close_add_sector_modal()}}};const r=(0,s(1900).Z)(i,(function(){var t=this,e=t._self._c;return e("stack-modal",{attrs:{show:t.add_sector_modal,title:"Add sector",saveButton:{visible:!0,title:"Save",btnClass:{"btn btn-primary":!0}},cancelButton:{visible:!1,title:"Close",btnClass:{"btn btn-danger":!0}}},on:{close:t.close_add_sector_modal}},[e("pre",{staticClass:"language-vue"},[t._v("        "),e("form",{staticClass:"form",attrs:{id:"add_new_sector"},on:{submit:function(e){return e.preventDefault(),t.add_sector_from_modal.apply(null,arguments)}}},[t._v("\n            "),t._v("\n            "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.selected_outdoor_area,expression:"selected_outdoor_area"}],staticClass:"form-control",attrs:{name:"comment delete cause"},on:{click:function(e){return t.get_region_sectors()},change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selected_outdoor_area=e.target.multiple?s:s[0]}}},[t._v(" \n                "),e("option",{attrs:{value:"Select outdoor area",disabled:""}},[t._v("Select outdoor area")]),t._v("\n                "),e("option",{attrs:{value:"All sectors"}},[t._v("Show all sectors")]),t._v("\n                "),t._l(t.outdoor_areas,(function(s){return e("option",{key:s.id,domProps:{value:s.id}},[t._v(t._s(s.url_title))])})),t._v("\n            ")],2),t._v("\n\n            "),t.sectors_loading||0==t.sectors.length?t._e():e("select",{directives:[{name:"model",rawName:"v-model",value:t.selected_sector,expression:"selected_sector"}],staticClass:"form-control",attrs:{name:"comment delete cause"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selected_sector=e.target.multiple?s:s[0]}}},[t._v(" \n                "),e("option",{attrs:{value:"Select sector",disabled:""}},[t._v("Select sector")]),t._v("\n                "),t._l(t.filtred_sectors,(function(s){return e("option",{key:s.id,domProps:{value:{id:s.id,name:s.name}}},[t._v(t._s(s.name))])})),t._v("\n            ")],2),t._v("\n\n            "),t.sectors_loading?e("img",{attrs:{src:"../../../public/images/site_img/loading.gif",alt:"loading"}}):t._e(),t._v("\n        ")]),t._v("\n    ")]),t._v(" "),e("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit",form:"add_new_sector"}},[t._v("Add new sector")])])])])}),[],!1,null,null,null).exports},6403:(t,e,s)=>{s.r(e),s.d(e,{default:()=>o});const a={components:{addSectorModal:s(1006).default},props:[],data:function(){return{old_image_sectors:[],new_image_sectors:[],data:{title:"",image:""},image:"",is_loading:!1,sectors_refresh:!1}},mounted:function(){this.get_editing_image()},methods:{get_editing_image:function(){var t=this;this.is_loading=!0,axios.get("../../api/sector_local_images/"+this.$route.params.id).then((function(e){t.data.title=e.data.sector_local_image.title,t.data.image=e.data.sector_local_image.image,t.old_image_sectors=e.data.sector_local_image_sectors})).catch().finally((function(){t.is_loading=!1}))},get_editing_sectors:function(){var t=this;axios.get("../../api/get_editing_sectors/"+this.$route.params.id).then((function(e){t.old_image_sectors=e.data})).catch()},add_new_sector:function(t){if("Select sector"!=t){this.new_image_sectors.length;this.new_image_sectors.push({id:t.id,name:t.name}),this.close_add_sector_modal()}},del_image_sector_from_db:function(t){var e=this;confirm("Are you sure, you want delite itt?")&&axios.post("../../api/del_image_sector_from_db/"+this.$route.params.id+"/"+t,{_method:"delete"}).then((function(t){e.get_editing_sectors()})).catch()},del_sector:function(t){this.removeObjectWithId(this.old_image_sectors,t)},removeObjectWithId:function(t,e){var s=t.findIndex((function(t){return t.id===e}));return t.splice(s,1),t},onFileChange:function(t){this.image=t.target.files[0]},update:function(){var t=this;this.is_loading=!0;var e=new FormData;e.append("image",this.image),e.append("image_sectors",JSON.stringify(this.new_image_sectors)),e.append("title",this.data.title),axios.post("../../api/sector_local_images/update_image/"+this.$route.params.id,e,{headers:{"content-type":"multipart/form-data"}}).then((function(e){t.$router.go(-1)})).catch().finally((function(){t.is_loading=!1}))},go_back:function(){window.confirm("Added information will be deleted!!! Are you sure, you want go back?")&&this.$router.go(-1)}}};const o=(0,s(1900).Z)(a,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.is_loading,expression:"is_loading"}],staticClass:"row justify-content-center"},[e("div",{staticClass:"col-md-4"},[e("img",{attrs:{src:"../../../../../../public/images/site_img/loading.gif",alt:"loading"}})])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.is_loading,expression:"!is_loading"}],staticClass:"col-md-12"},[e("div",{staticClass:"row"},[t._m(0),t._v(" "),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-groupe"},[e("button",{staticClass:"btn btn-success float-right",on:{click:function(e){return t.go_back()}}},[t._v("Go back")])])])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.is_loading,expression:"!is_loading"}],staticClass:"col-md-12"},[e("form",{ref:"myForm",attrs:{id:"myForm",enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.update.apply(null,arguments)}}},[e("div",{staticClass:"form-group clearfix row"},[e("label",{staticClass:"col-md-2 control-label",attrs:{for:"name"}},[t._v(" Title ")]),t._v(" "),e("div",{staticClass:"col-md-10"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.title,expression:"data.title"}],staticClass:"form-control",attrs:{type:"text",name:"name",required:""},domProps:{value:t.data.title},on:{input:function(e){e.target.composing||t.$set(t.data,"title",e.target.value)}}})])]),t._v(" "),e("div",{staticClass:"form-group clearfix row"},[e("label",{staticClass:"col-md-2 control-label",attrs:{for:"email"}},[t._v("Active image:")]),t._v(" "),e("div",{staticClass:"col-md-5"},[e("img",{attrs:{src:"/public/images/sector_local_img/"+t.data.image,alt:"Locale sectors image"}})])]),t._v(" "),e("div",{staticClass:"form-group clearfix row"},[e("label",{staticClass:"col-md-2 control-label",attrs:{for:"email"}},[t._v("Upload new image:")]),t._v(" "),e("div",{staticClass:"col-md-10"},[e("input",{attrs:{type:"file",name:"image",id:"image"},on:{change:t.onFileChange}})])])]),t._v(" "),t._m(1),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-groupe"},[e("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.$refs.myChild.add_new_sector_model()}}},[t._v("Add new sector")])])]),t._v(" "),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-groupe"},[t.sectors_refresh?t._e():e("button",{staticClass:"btn btn-success float-right",on:{click:t.get_editing_sectors}},[t._v("Refresh")]),t._v(" "),t.sectors_refresh?e("span",{staticClass:"badge badge-primare mb-1 float-right"},[t._v("Updating...")]):t._e()])])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("table",{staticClass:"table table-hover",attrs:{id:"dev-table"}},[t._m(2),t._v(" "),t.old_image_sectors.length?e("th",[t._v("Previously adde")]):t._e(),t._v(" "),t.old_image_sectors!=[]?e("tbody",t._l(t.old_image_sectors,(function(s){return e("tr",{key:s.id},[e("td",[t._v(t._s(s.id))]),t._v(" "),e("td",[t._v("|")]),t._v(" "),e("td",[t._v(t._s(s.name)+" ")]),t._v(" "),e("td",[t._v("|")]),t._v(" "),e("td",[e("button",{staticClass:"btn btn-danger",attrs:{type:"submit"},on:{click:function(e){return t.del_image_sector_from_db(s.id)}}},[t._v("Delete")])])])})),0):t._e(),t._v(" "),t.new_image_sectors.length?e("th",[t._v("Added naw")]):t._e(),t._v(" "),t.new_image_sectors!=[]?e("tbody",t._l(t.new_image_sectors,(function(s){return e("tr",{key:s.id},[e("td",[t._v(t._s(s.id))]),t._v(" "),e("td",[t._v("|")]),t._v(" "),e("td",[t._v(t._s(s.name)+" ")]),t._v(" "),e("td",[t._v("|")]),t._v(" "),e("td",[e("button",{staticClass:"btn btn-danger",attrs:{type:"submit"},on:{click:function(e){return t.del_sector(s.id)}}},[t._v("Delete")])])])})),0):t._e()])])])]),t._v(" "),e("addSectorModal",{ref:"myChild",on:{sector:t.add_new_sector}})],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"form-groupe"},[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit",form:"myForm"}},[this._v("Save")])])])},function(){var t=this._self._c;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("hr")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Sector id")]),t._v(" "),e("th",[t._v("|")]),t._v(" "),e("th",[t._v("Sector name")]),t._v(" "),e("th",[t._v("|")]),t._v(" "),e("th",[t._v("Delite")])])])}],!1,null,null,null).exports}}]);