"use strict";(self.webpackChunkclimbing_loc=self.webpackChunkclimbing_loc||[]).push([[2084],{2084:(t,a,e)=>{e.r(a),e.d(a,{default:()=>r});var i=e(4443);const s={mixins:[i.z],data:function(){return{description_editor:i.z.get_small_editor_config(),regions:[],sectors:[],errors:[],data:{article_id:"",sector_id:"",name:"",text:"",height:"",first_ascent:"",author:""},is_loading:!1,is_back_action_query:!0,go_back_action:!1}},mounted:function(){this.get_region_data()},beforeRouteLeave:function(t,a,e){1==this.is_back_action_query?window.confirm("Added information will be deleted!!! Are you sure, you want go back?")?(this.is_back_action_query=!1,e()):e(!1):e()},methods:{get_region_data:function(){var t=this;axios.post("../../api/article/",{category:"outdoor"}).then((function(a){t.regions=a.data,t.get_sectors_data()})).catch((function(t){return console.log(t)})).finally((function(){return t.is_loading=!1}))},get_sectors_data:function(){var t=this;axios.get("../../api/sector/").then((function(a){t.all_sectors=a.data,t.get_mtp_editing_data()})).catch((function(t){return console.log(t)})).finally((function(){return t.is_loading=!1}))},get_mtp_editing_data:function(){var t=this;this.is_loading=!0,axios.get("../../api/mtp/get_editing_mtp/"+this.$route.params.id).then((function(a){t.data=a.data;var e=t.all_sectors.find((function(a){return a.id===t.data.sector_id})),i=t.regions.find((function(t){return t.id===e.article_id}));t.data.article_id=i.id,t.filter_sectors()})).catch((function(t){return console.log(t)})).finally((function(){return t.is_loading=!1}))},filter_sectors:function(){var t=this;this.sectors=this.all_sectors.filter((function(a){return a.article_id==t.data.article_id}))},edit_mtp:function(){var t=this;axios.post("../../api/mtp/mtp_edit/"+this.$route.params.id,{data:this.data}).then((function(a){t.go_back(!0)})).catch((function(a){422==a.response.status&&(t.errors=a.response.data.errors)})).finally((function(){return t.is_loading=!1}))},go_back:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.is_back_action_query=this.$going.back(this,t)}}};const r=(0,e(1900).Z)(s,(function(){var t=this,a=t._self._c;return a("div",{staticClass:"col-md-12"},[t.is_loading?a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-md-4"},[a("img",{attrs:{src:"../../../../../../public/images/site_img/loading.gif",alt:"loading"}})])]):t._e(),t._v(" "),t.is_loading?t._e():a("div",{staticClass:"row"},[a("div",{staticClass:"form-group"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(a){return t.go_back()}}},[t._v("Beck")])])]),t._v(" "),t.is_loading?t._e():a("div",{staticClass:"row"},[t._m(0)]),t._v(" "),t.is_loading?t._e():a("div",{staticClass:"wrapper container-fluid container"},[a("form",{attrs:{id:"route_edit_form"},on:{submit:function(a){return a.preventDefault(),t.edit_mtp()}}},[a("div",{staticClass:"form-group clearfix row"},[a("label",{staticClass:"col-md-2 control-label",attrs:{for:"name"}},[t._v(" Region ")]),t._v(" "),a("div",{staticClass:"col-md-5"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.data.article_id,expression:"data.article_id"}],staticClass:"form-control",attrs:{required:""},on:{click:function(a){return t.filter_sectors()},change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.data,"article_id",a.target.multiple?e:e[0])}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("Select outdoor article")]),t._v(" "),t._l(t.regions,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.url_title))])}))],2)]),t._v(" "),a("div",{staticClass:"col-md-5"},[""!=t.data.article_id?a("select",{directives:[{name:"model",rawName:"v-model",value:t.data.sector_id,expression:"data.sector_id"}],staticClass:"form-control",attrs:{required:""},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.data,"sector_id",a.target.multiple?e:e[0])}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("Select sector")]),t._v(" "),t._l(t.sectors,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2):t._e()])]),t._v(" "),t.errors.sector_id?a("div",{staticClass:"form-group clearfix row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v("\n              "+t._s(t.errors.sector_id[0])+"\n            ")])])]):t._e(),t._v(" "),a("div",{staticClass:"form-group clearfix row"},[a("label",{staticClass:"col-md-2 control-label",attrs:{for:"name"}},[t._v(" Multy pitch name ")]),t._v(" "),a("div",{staticClass:"col-md-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.name,expression:"data.name"}],staticClass:"form-control",attrs:{type:"text",name:"name",placeholder:"Name",required:""},domProps:{value:t.data.name},on:{input:function(a){a.target.composing||t.$set(t.data,"name",a.target.value)}}}),t._v(" "),t.errors.name?a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v("\n              "+t._s(t.errors.name[0])+"\n            ")]):t._e()])]),t._v(" "),a("div",{staticClass:"form-group clearfix row"},[a("label",{staticClass:"col-md-2 control-label",attrs:{for:"name"}},[t._v(" text ")]),t._v(" "),a("div",{staticClass:"col-md-10"},[a("ckeditor",{attrs:{config:t.description_editor},model:{value:t.data.text,callback:function(a){t.$set(t.data,"text",a)},expression:"data.text"}})],1)]),t._v(" "),a("div",{staticClass:"form-group clearfix row"},[a("label",{staticClass:"col-md-2 control-label",attrs:{for:"name"}},[t._v(" Height ")]),t._v(" "),a("div",{staticClass:"col-md-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.height,expression:"data.height"}],staticClass:"form-control",attrs:{type:"number",name:"title",placeholder:"Height"},domProps:{value:t.data.height},on:{input:function(a){a.target.composing||t.$set(t.data,"height",a.target.value)}}})]),t._v(" "),a("label",{staticClass:"col-md-1 control-label",attrs:{for:"name"}},[t._v(" M ")])]),t._v(" "),a("div",{staticClass:"form-group clearfix row"},[a("label",{staticClass:"col-md-2 control-label",attrs:{for:"name"}},[t._v("First ascent / Auther")]),t._v(" "),a("div",{staticClass:"col-md-5"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.first_ascent,expression:"data.first_ascent"}],staticClass:"form-control",attrs:{type:"text",name:"first_ascent",placeholder:"First ascent"},domProps:{value:t.data.first_ascent},on:{input:function(a){a.target.composing||t.$set(t.data,"first_ascent",a.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-5"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.author,expression:"data.author"}],staticClass:"form-control",attrs:{type:"text",name:"author",placeholder:"Auther"},domProps:{value:t.data.author},on:{input:function(a){a.target.composing||t.$set(t.data,"author",a.target.value)}}})])])])]),t._v(" "),t.is_loading?a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-md-4"},[a("img",{attrs:{src:"../../../../../../public/images/site_img/loading.gif",alt:"loading"}})])]):t._e()])}),[function(){var t=this,a=t._self._c;return a("div",{staticClass:"form-group"},[a("button",{staticClass:"btn btn-primary",attrs:{form:"route_edit_form",type:"submit"}},[t._v("Save and go back")]),t._v(" "),a("p",[t._v("Save and go to route tab page")])])}],!1,null,null,null).exports}}]);