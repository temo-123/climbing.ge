"use strict";(self.webpackChunkclimbing_loc=self.webpackChunkclimbing_loc||[]).push([[304],{7713:(t,e,n)=>{n.d(e,{Z:()=>o});var i=n(1519),s=n.n(i)()((function(t){return t[1]}));s.push([t.id,".btn_service_guid{background-color:#279fbb}.btn_service_shop{background-color:#27bb7d}.btn_service_films{background-color:#777}",""]);const o=s},7537:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(6247),s=n(2586);const o={components:{StackModal:n.n(s)(),SlickItem:i.SlickItem,SlickList:i.SlickList},data:function(){return{user:[],complaint_loader:!1,complaints:[],quick_comment:[],comment_decision:"select_decision",selected_comment_complaint:"This is my comment",is_comment_decision_selected:!1,is_coment_complaint_model:!1,action_comment_id:0,is_admin_panel_refresh:!1,admin_refresh_id:0,decision_loader:!1,user_queries:[],is_coment_model:!1,is_user_comment_complaint_model:!1,is_email_sending_loader:!1,complaint_comment_id:0,complaint_query_id:0}},mounted:function(){this.refresh(),this.get_user_data()},methods:{get_user_data:function(){var t=this;axios.get("/api/auth_user").then((function(e){t.user=e.data,t.get_user_queries(t.user.id)}))},send_mail_confirm_notificatione:function(){var t=this;this.is_email_sending_loader=!0,axios.get("/api/email/resend").then((function(t){alert("New verification message is sended. Please check your email for verification!")})).catch((function(t){429===t.response.status?alert("The page has expired or you clicked this button too many times! Please try again later or contact support!"):alert("Something went wrong! Please try again later, if you encounter this problem again, contact support!")})).finally((function(){return t.is_email_sending_loader=!1}))},refresh:function(){this.admin_refresh_id++,this.get_user_data(),this.get_comments_complaints()},get_user_queries:function(t){var e=this;axios.get("../api/get_user_queries/"+t).then((function(t){e.user_queries=t.data}))},make_complaint:function(){var t=this;this.complaint_loader=!0,axios.post("../api/add_comment_complaint/",{comment_id:this.complaint_comment_id,comment_complaint:this.selected_comment_complaint,email:this.complainter_email}).then((function(e){t.is_user_comment_complaint_model=!1,t.selected_comment_complaint="Hostile remarks",t.refresh()})).catch().finally((function(){return t.complaint_loader=!1}))},query_response:function(t,e,n){var i=this;axios.post("../api/query_response/",{query_id:e,comment_id:n,response:t}).then((function(t){i.refresh,1==i.is_coment_model&&(i.is_coment_model=!1)}))},show_complaint_modal:function(t){this.is_coment_model=!1,this.complaint_comment_id=t,this.is_user_comment_complaint_model=!0},coment_model:function(t,e){this.get_action_comment(t),this.complaint_query_id=e,this.is_coment_model=!0},quick_wiev_action:function(t,e){this.is_coment_complaint_model=!0,this.get_action_comment(t),this.action_comment_id=t,this.complaint_id=e},get_action_comment:function(t){var e=this;this.quick_comment=[],axios.get("../api/get_quick_comment/"+t).then((function(t){e.quick_comment=t.data})).catch((function(t){return console.log(t)}))},get_comments_complaints:function(){var t=this;axios.get("../api/get_comments_complaints").then((function(e){t.complaints=e.data}))},make_decision:function(){var t=this;"select_decision"==this.comment_decision?this.is_comment_decision_selected=!0:(this.decision_loader=!0,axios.post("./api/make_decision",{decision:this.comment_decision,comment_id:this.action_comment_id,complaint_id:this.complaint_id}).then((function(e){t.is_coment_complaint_model=!1,t.refresh()})).finally((function(){return t.decision_loader=!1})))}}};const a=(0,n(1900).Z)(o,(function(){var t=this,e=t._self._c;return e("span",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-groupe"},[t.is_admin_panel_refresh?t._e():e("button",{staticClass:"btn btn-success float-right",on:{click:function(e){return t.refresh()}}},[t._v("Refresh notifications ("+t._s(t.admin_refresh_id)+")")]),t._v(" "),t.is_admin_panel_refresh?e("span",{staticClass:"badge badge-primare mb-1 float-right"},[t._v("Updating...")]):t._e()])])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[this.user.name&&this.user.surname&&this.user.country&&this.user.city&&this.user.email?t._e():e("span",[t._m(0)]),t._v(" "),this.user.email_verified_at?t._e():e("span",[e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t.is_email_sending_loader?t.is_email_sending_loader?e("span",[e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-md-3"},[e("img",{attrs:{src:"../../../../../../public/images/site_img/loading.gif",alt:"loading"}}),t._v(" "),e("p",{staticClass:"text-center"},[t._v("Pless wait!")])])])]):t._e():e("span",[e("strong",[t._v("Danger!")]),t._v(" We sent you an email for verification, please check your email and confirm it. If you don't got this email you can demand new message. For new message -> "),e("span",{staticClass:"cursor_pointer",on:{click:function(e){return t.send_mail_confirm_notificatione()}}},[t._v("Click here")]),t._v(".\n                    ")])])]),t._v(" "),this.user.image?t._e():e("span",[t._m(1)]),t._v(" "),t.$can("show","comments")||t.$can("del_comment","comments")?e("span",t._l(t.complaints,(function(n){return e("div",{key:n.id,staticClass:"alert alert-warning",attrs:{role:"alert"}},[e("strong",[t._v("Warning!")]),t._v(" one comment are a complainted. Please check it and make decision!\n\n                    "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.quick_wiev_action(n.comment_id,n.id)}}},[t._v("Check comment")]),t._v(".\n                        ")])])])})),0):t._e(),t._v(" "),t._l(t.user_queries,(function(n){return e("span",{key:n.id},[e("div",{staticClass:"alert alert-warning",attrs:{role:"alert"}},[e("strong",[t._v("Warning!")]),t._v(" We fined yor email in one of the article comment. Maybe it's your comment. Plees check it end click to ansver. Is it your comment?\n                    \n                    "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("button",{staticClass:"btn btn-success",on:{click:function(e){return t.coment_model(n.comment_id,n.id)}}},[t._v("Check comment!")]),t._v(".\n                        ")])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.query_response(!0,n.id,n.comment_id)}}},[t._v("Yes, it is my comment!")]),t._v(".\n                        ")]),t._v(" "),e("div",{staticClass:"col-md-6"},[e("button",{staticClass:"btn btn-danger float-right",on:{click:function(e){return t.query_response(!1,n.id,n.comment_id)}}},[t._v("No, it is not my comment!")]),t._v(".\n                        ")])])])])})),t._v(" "),t.$can("edit","site_data")?e("span",[this.$siteData.text&&this.$siteData.text_ru&&this.$siteData.text_ka&&this.$siteData.short_description_ru&&this.$siteData.short_description_ka&&this.$siteData.short_description?t._e():e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("strong",[t._v("Danger!")]),t._v(' \n                    Web-site information is not fool. check page "\n                    '),e("router-link",{attrs:{to:{name:"siteInfo"},exact:""}},[t._v(" \n                        About us\n                    ")]),t._v('\n                    ", and add missing information.\n                ')],1)]):t._e()],2)]),t._v(" "),e("stack-modal",{attrs:{show:t.is_coment_complaint_model,title:"Show coment",saveButton:{visible:!0,title:"Save",btnClass:{"btn btn-primary":!0}},cancelButton:{visible:!1,title:"Close",btnClass:{"btn btn-danger":!0}}},on:{close:function(e){t.is_coment_complaint_model=!1}}},[e("pre",{staticClass:"language-vue"},[t._v("            "),t.decision_loader?e("div",{staticClass:"row justify-content-center"},[t._v("\n                "),e("div",{staticClass:"col-md-4"},[t._v("\n                    "),e("img",{attrs:{src:"../public/images/site_img/loading.gif",alt:"loading"}}),t._v("\n                ")]),t._v("\n            ")]):t._e(),t._v("\n\n            "),t.decision_loader?t._e():e("span",[t._v("\n                "),e("h1",[t._v("Show Comment")]),t._v("\n\n                Comentator - "+t._s(t.quick_comment.name)+" "+t._s(t.quick_comment.suenmae)+"\n                Email - "+t._s(t.quick_comment.email)+"\n                Data to comment - "+t._s(t.quick_comment.created_at)+"\n\n                "+t._s(t.quick_comment.text)+"\n\n                "),e("h1",[t._v("Comment complaint")]),t._v("\n                Email - "+t._s(t.quick_comment.email)+"\n                Complaint status - "+t._s(t.quick_comment.complaint)+"\n\n                "),e("h1",[t._v("Make decision")]),t._v("\n                \n                "),e("form",{staticClass:"form",attrs:{id:"make_decision"},on:{submit:function(e){return e.preventDefault(),t.make_decision.apply(null,arguments)}}},[t._v("\n                    "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.comment_decision,expression:"comment_decision"}],staticClass:"form-control",attrs:{name:"comment delete cause"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.comment_decision=e.target.multiple?n:n[0]}}},[t._v(" \n                        "),e("option",{attrs:{value:"select_decision",disabled:""}},[t._v("Select decision")]),t._v("\n                        "),e("option",{attrs:{value:"approve_request"}},[t._v("Approve the request")]),t._v("\n                        "),e("option",{attrs:{value:"reject_request"}},[t._v("Reject the request")]),t._v("\n                    ")]),t._v(" \n                    "),t.is_comment_decision_selected?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v("Please select decision!!!")]):t._e(),t._v("\n                ")]),t._v("\n            ")]),t._v("\n        ")]),t._v(" "),e("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[e("div",{staticClass:"modal-footer"},[e("button",{class:{"btn btn-primary":!0},attrs:{type:"submit",form:"make_decision"}},[t._v("\n                Make a decision\n                ")])])])]),t._v(" "),e("stack-modal",{attrs:{show:t.is_user_comment_complaint_model,title:"Please select a reason for deleting the comment",saveButton:{visible:!0,title:"Save",btnClass:{"btn btn-primary":!0}},cancelButton:{visible:!1,title:"Close",btnClass:{"btn btn-danger":!0}}},on:{close:function(e){t.is_user_comment_complaint_model=!1}}},[e("pre",{staticClass:"language-vue"},[t._v("            "),t.complaint_loader?e("div",{staticClass:"row justify-content-center"},[t._v("\n                "),e("div",{staticClass:"col-md-4"},[t._v("\n                    "),e("img",{attrs:{src:"../public/images/site_img/loading.gif",alt:"loading"}}),t._v("\n                ")]),t._v("\n            ")]):t._e(),t._v("\n\n            "),t.complaint_loader?t._e():e("span",[t._v("\n                "),e("h1",[t._v("You can file a complaint for this comment")]),t._v("\n                "),e("p",[t._v("Please select a reason for deleting the comment!!!")]),t._v("\n                \n                "),e("form",{staticClass:"form",attrs:{id:"make_complaint"},on:{submit:function(e){return e.preventDefault(),t.make_complaint.apply(null,arguments)}}},[t._v("\n                    "),0==t.user.length?e("input",{directives:[{name:"model",rawName:"v-model",value:t.complainter_email,expression:"complainter_email"}],staticClass:"form-control textarea",attrs:{type:"email",name:"complainter email",placeholder:"Your email"},domProps:{value:t.complainter_email},on:{input:function(e){e.target.composing||(t.complainter_email=e.target.value)}}}):t._e(),t._v("\n\n                    "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.selected_comment_complaint,expression:"selected_comment_complaint"}],staticClass:"form-control",attrs:{name:"comment delete cause"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selected_comment_complaint=e.target.multiple?n:n[0]}}},[t._v(" \n                        "),e("option",{attrs:{value:"This is my comment"}},[t._v("This is my comment")]),t._v("\n                        "),e("option",{attrs:{value:"Hostile remarks"}},[t._v("Hostile remarks")]),t._v("\n                        "),e("option",{attrs:{value:"Does not match the theme of the site"}},[t._v("Does not match the theme of the site")]),t._v("\n                        "),e("option",{attrs:{value:"Spam"}},[t._v("Spam")]),t._v("\n                        "),e("option",{attrs:{value:"Sexual content"}},[t._v("Sexual content")]),t._v("\n                        "),e("option",{attrs:{value:"Expression of anger"}},[t._v("Expression of anger")]),t._v("\n                        "),e("option",{attrs:{value:"Conflict with other members of the site"}},[t._v("Conflict with other members of the site")]),t._v("\n                        "),e("option",{attrs:{value:"The language of the comments does not match the requirements of the site"}},[t._v("The language of the comments does not match the requirements of the site")]),t._v("\n                    ")]),t._v("\n                ")]),t._v("\n            ")]),t._v("\n        ")]),t._v(" "),e("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[e("div",{staticClass:"modal-footer"},[e("button",{class:{"btn btn-primary":!0},attrs:{type:"submit",form:"make_complaint"}},[t._v("\n                Submit\n                ")])])])]),t._v(" "),e("stack-modal",{attrs:{show:t.is_coment_model,title:"Show coment",saveButton:{visible:!0,title:"Save",btnClass:{"btn btn-primary":!0}},cancelButton:{visible:!1,title:"Close",btnClass:{"btn btn-danger":!0}}},on:{close:function(e){t.is_coment_model=!1}}},[e("pre",{staticClass:"language-vue"},[t._v("            "),t.decision_loader?e("div",{staticClass:"row justify-content-center"},[t._v("\n                "),e("div",{staticClass:"col-md-4"},[t._v("\n                    "),e("img",{attrs:{src:"../public/images/site_img/loading.gif",alt:"loading"}}),t._v("\n                ")]),t._v("\n            ")]):t._e(),t._v("\n\n            "),t.decision_loader?t._e():e("span",[t._v("\n                "),e("h1",[t._v("Show Comment")]),t._v("\n\n                Comentator - "+t._s(t.quick_comment.name)+" "+t._s(t.quick_comment.suenmae)+"\n                Email - "+t._s(t.quick_comment.email)+"\n                Data to comment - "+t._s(t.quick_comment.created_at)+"\n\n                "+t._s(t.quick_comment.text)+"\n\n                "),e("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.query_response(!0,t.complaint_query_id,t.quick_comment.id)}}},[t._v("Yes, it is my comment!")]),t._v("\n                "),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.query_response(!1,t.complaint_query_id,t.quick_comment.id)}}},[t._v("No, it is not my comment!")]),t._v("\n\n            ")]),t._v("\n        ")]),t._v(" "),e("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[e("div",{staticClass:"modal-footer"},[e("button",{class:{"btn btn-primary":!0},attrs:{type:"submit"},on:{click:function(e){return t.show_complaint_modal(t.quick_comment.id)}}},[t._v("\n                Make file a complaint\n                ")])])])])],1)}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("strong",[t._v("Danger!")]),t._v(' Your personal data is missing, this can lead to rolling problems. check page "option", and add missing information.\n                ')])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"alert alert-warning",attrs:{role:"alert"}},[e("strong",[t._v("Warning!")]),t._v(" Add your profil image and piple faind you isier\n                ")])}],!1,null,null,null).exports},304:(t,e,n)=>{n.r(e),n.d(e,{default:()=>l});const i={components:{user_notifications_list:n(7537).Z},data:function(){return{user:[],MIX_SITE_URL:"climbing.ge",MIX_APP_SSH:"https://"}},mounted:function(){},methods:{get_user_data:function(){var t=this;axios.get("/api/auth_user").then((function(e){t.user=e.data,t.get_user_queries(t.user.id)}))},go_to_service:function(t){"shop"==t?window.open(this.MIX_APP_SSH+"shop."+this.MIX_SITE_URL):"guid"==t?window.open(this.MIX_APP_SSH+this.MIX_SITE_URL+"/"):"films"==t&&window.open(this.MIX_APP_SSH+"films."+this.MIX_SITE_URL+"/")}}};var s=n(3379),o=n.n(s),a=n(7713),c={insert:"head",singleton:!1};o()(a.Z,c);a.Z.locals;const l=(0,n(1900).Z)(i,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-3"},[e("left-menu")],1),t._v(" "),e("div",{staticClass:"col-sm-9"},[e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[e("h1",[t._v("Hi "+t._s(this.user.name))])])])]),t._v(" "),e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[t._v("Sites index pages")]),t._v(" "),e("div",{staticClass:"card-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12 col-md-4"},[e("button",{staticClass:"btn btn_service_guid",on:{click:function(e){return t.go_to_service("guid")}}},[t._v("Climbing Guidbook")])]),t._v(" "),e("div",{staticClass:"col-sm-12 col-md-4 text-center"},[e("button",{staticClass:"btn btn_service_shop",on:{click:function(e){return t.go_to_service("shop")}}},[t._v("Climbing Shop")])]),t._v(" "),e("div",{staticClass:"col-sm-12 col-md-4"},[e("button",{staticClass:"btn btn_service_films float-right",on:{click:function(e){return t.go_to_service("films")}}},[t._v("Climbing Films")])])])])])])]),t._v(" "),e("user_notifications_list")],1)])}),[],!1,null,null,null).exports}}]);