"use strict";(self.webpackChunkclimbing_loc=self.webpackChunkclimbing_loc||[]).push([[2127,1006],{1006:(t,e,o)=>{o.r(e),o.d(e,{default:()=>r});var s=o(6247),a=o(2586);const i={components:{StackModal:o.n(a)(),SlickItem:s.SlickItem,SlickList:s.SlickList},props:[],data:function(){return{sectors:[],filtred_sectors:[],outdoor_areas:[],sectors_loading:!1,add_sector_modal:!1,selected_sector:"Select sector",selected_outdoor_area:"Select outdoor area",image_sectors:[],data:{title:"",image:""}}},mounted:function(){this.get_all_outdoor_areas(),this.get_all_sectors()},methods:{get_all_outdoor_areas:function(){var t=this;this.sectors_loading=!0,axios.post("../../api/article/",{category:"outdoor"}).then((function(e){t.outdoor_areas=e.data})).catch((function(t){return console.log(t)})).finally((function(){return t.sectors_loading=!1}))},get_all_sectors:function(){var t=this;axios.get("../../api/sector/").then((function(e){t.sectors=e.data})).catch((function(t){return console.log(t)}))},get_region_sectors:function(){if("Select outdoor area"!=this.selected_outdoor_area&&"All sectors"!=this.selected_outdoor_area){var t=this;this.filtred_sectors=this.sectors.filter((function(e){return e.article_id==t.selected_outdoor_area}))}else"Select outdoor area"!=this.selected_outdoor_area&&this.selected_outdoor_area,this.filtred_sectors=this.sectors},close_add_sector_modal:function(){this.selected_sector="Select sector",this.add_sector_modal=!1},add_new_sector_model:function(){this.add_sector_modal=!0},add_sector_from_modal:function(t){this.$emit("sector",this.selected_sector),this.close_add_sector_modal()}}};const r=(0,o(1900).Z)(i,(function(){var t=this,e=t._self._c;return e("stack-modal",{attrs:{show:t.add_sector_modal,title:"Add sector",saveButton:{visible:!0,title:"Save",btnClass:{"btn btn-primary":!0}},cancelButton:{visible:!1,title:"Close",btnClass:{"btn btn-danger":!0}}},on:{close:t.close_add_sector_modal}},[e("pre",{staticClass:"language-vue"},[t._v("        "),e("form",{staticClass:"form",attrs:{id:"add_new_sector"},on:{submit:function(e){return e.preventDefault(),t.add_sector_from_modal.apply(null,arguments)}}},[t._v("\n            "),t._v("\n            "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.selected_outdoor_area,expression:"selected_outdoor_area"}],staticClass:"form-control",attrs:{name:"comment delete cause"},on:{click:function(e){return t.get_region_sectors()},change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selected_outdoor_area=e.target.multiple?o:o[0]}}},[t._v(" \n                "),e("option",{attrs:{value:"Select outdoor area",disabled:""}},[t._v("Select outdoor area")]),t._v("\n                "),e("option",{attrs:{value:"All sectors"}},[t._v("Show all sectors")]),t._v("\n                "),t._l(t.outdoor_areas,(function(o){return e("option",{key:o.id,domProps:{value:o.id}},[t._v(t._s(o.url_title))])})),t._v("\n            ")],2),t._v("\n\n            "),t.sectors_loading||0==t.sectors.length?t._e():e("select",{directives:[{name:"model",rawName:"v-model",value:t.selected_sector,expression:"selected_sector"}],staticClass:"form-control",attrs:{name:"comment delete cause"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selected_sector=e.target.multiple?o:o[0]}}},[t._v(" \n                "),e("option",{attrs:{value:"Select sector",disabled:""}},[t._v("Select sector")]),t._v("\n                "),t._l(t.filtred_sectors,(function(o){return e("option",{key:o.id,domProps:{value:{id:o.id,name:o.name}}},[t._v(t._s(o.name))])})),t._v("\n            ")],2),t._v("\n\n            "),t.sectors_loading?e("img",{attrs:{src:"../../../public/images/site_img/loading.gif",alt:"loading"}}):t._e(),t._v("\n        ")]),t._v("\n    ")]),t._v(" "),e("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit",form:"add_new_sector"}},[t._v("Add new sector")])])])])}),[],!1,null,null,null).exports},2127:(t,e,o)=>{o.r(e),o.d(e,{default:()=>a});const s={components:{addSectorModal:o(1006).default},props:[],data:function(){return{add_sector_modal:!1,image_sectors:[],is_loading:!1,data:{title:"",image:""}}},mounted:function(){},methods:{add_new_sector:function(t){if("Select sector"!=t){this.image_sectors.length;this.image_sectors.push({id:t.id,name:t.name})}},del_sector:function(t){this.removeObjectWithId(this.image_sectors,t)},removeObjectWithId:function(t,e){var o=t.findIndex((function(t){return t.id===e}));return t.splice(o,1),t},onFileChange:function(t){this.data.image=t.target.files[0]},save:function(){var t=this;this.is_loading=!0;var e=new FormData;e.append("image",this.data.image),e.append("image_sectors",JSON.stringify(this.image_sectors)),e.append("title",this.data.title),axios.post("../api/sector_local_images/",e,{headers:{"content-type":"multipart/form-data"}}).then((function(e){t.$router.go(-1)})).catch().finally((function(){t.is_loading=!1}))},go_back:function(){window.confirm("Added information will be deleted!!! Are you sure, you want go back?")&&this.$router.go(-1)}}};const a=(0,o(1900).Z)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.is_loading,expression:"is_loading"}],staticClass:"row justify-content-center"},[e("div",{staticClass:"col-md-4"},[e("img",{attrs:{src:"../../../../../../public/images/site_img/loading.gif",alt:"loading"}})])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.is_loading,expression:"!is_loading"}],staticClass:"col-md-12"},[e("div",{staticClass:"row"},[t._m(0),t._v(" "),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-groupe"},[e("button",{staticClass:"btn btn-success float-right",on:{click:function(e){return t.go_back()}}},[t._v("Go back")])])])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.is_loading,expression:"!is_loading"}],staticClass:"col-md-12"},[e("form",{ref:"myForm",attrs:{id:"myForm",enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[e("div",{staticClass:"form-group clearfix row"},[e("label",{staticClass:"col-md-2 control-label",attrs:{for:"name"}},[t._v(" Title ")]),t._v(" "),e("div",{staticClass:"col-md-10"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.title,expression:"data.title"}],staticClass:"form-control",attrs:{type:"text",name:"name",required:""},domProps:{value:t.data.title},on:{input:function(e){e.target.composing||t.$set(t.data,"title",e.target.value)}}})])]),t._v(" "),e("div",{staticClass:"form-group clearfix row"},[e("label",{staticClass:"col-md-2 control-label",attrs:{for:"email"}},[t._v("Upload image:")]),t._v(" "),e("div",{staticClass:"col-md-10"},[e("input",{attrs:{type:"file",name:"image",id:"image",required:""},on:{change:t.onFileChange}})])])]),t._v(" "),t._m(1),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-groupe"},[e("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.$refs.myChild.add_new_sector_model()}}},[t._v("Add new sector")])])])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("table",{staticClass:"table table-hover",attrs:{id:"dev-table"}},[t._m(2),t._v(" "),t.image_sectors!=[]?e("tbody",t._l(t.image_sectors,(function(o){return e("tr",{key:o.id},[e("td",[t._v(t._s(o.id))]),t._v(" "),e("td",[t._v("|")]),t._v(" "),e("td",[t._v(t._s(o.name)+" ")]),t._v(" "),e("td",[t._v("|")]),t._v(" "),e("td",[e("button",{staticClass:"btn btn-danger",attrs:{type:"submit"},on:{click:function(e){return t.del_sector(o.id)}}},[t._v("Delete")])])])})),0):t._e()])])])]),t._v(" "),e("addSectorModal",{ref:"myChild",on:{sector:t.add_new_sector}})],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"form-groupe"},[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit",form:"myForm"}},[this._v("Save")])])])},function(){var t=this._self._c;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("hr")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Sector id")]),t._v(" "),e("th",[t._v("|")]),t._v(" "),e("th",[t._v("Sector name")]),t._v(" "),e("th",[t._v("|")]),t._v(" "),e("th",[t._v("Delite")])])])}],!1,null,null,null).exports}}]);